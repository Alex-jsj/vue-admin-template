webpackJsonp([7],{Luci:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("exGp"),c=s.n(a),o=s("M9A7"),r={name:"login",data:function(){return{autoLogin:!0,explain_switch:!1,loading:!1,show_pwd:!1,user_text:"",psd_text:"",captcha_img:"",captcha_key:"",captcha_text:"",user_err:"",psd_err:"",captcha_err:"",timer:null}},components:{switchLang:s("l/oH").a},mounted:function(){this.bg_canvas()},methods:{bg_canvas:function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=30,n=document.getElementById("bgCanvas");n.width=t,n.height=e;var i=n.getContext("2d");i.strokeStyle="rgba(255,255,255,0.3)",i.strokeWidth=1,i.fillStyle="rgba(255,255,255,0.2)";var a=[];function c(t,e){var s=arguments[1]||0;return Math.floor(Math.random()*(t-s+1)+s)}function o(t,e,s,n,i,a){var c=new function(t,e,s,n,i){this.x=t,this.y=e,this.r=s,this.moveX=n,this.moveY=i}(e,s,n,i,a);return t.beginPath(),t.arc(c.x,c.y,c.r,0,2*Math.PI),t.closePath(),t.fill(),c}function r(){i.clearRect(0,0,n.width,n.height);for(var t=0;t<s;t++)o(i,a[t].x,a[t].y,a[t].r);for(t=0;t<s;t++)for(var e=0;e<s;e++)if(t+e<s){var c=Math.abs(a[t+e].x-a[t].x),r=Math.abs(a[t+e].y-a[t].y),l=1/Math.sqrt(c*c+r*r)*7-.009,u=l>.03?.03:l;u>0&&(h=i,d=a[t].x,p=a[t].y,_=a[t+e].x,g=a[t+e].y,void 0,v=new function(t,e,s,n,i){this.beginX=t,this.beginY=e,this.closeX=s,this.closeY=n,this.o=i}(d,p,_,g,m=u),h.beginPath(),h.strokeStyle="rgba(255,255,255,"+m+")",h.moveTo(v.beginX,v.beginY),h.lineTo(v.closeX,v.closeY),h.closePath(),h.stroke())}var h,d,p,_,g,m,v}!function(){a=[];for(var n=0;n<s;n++)a.push(o(i,c(t),c(e),c(20,2),c(10,-10)/40,c(10,-10)/40));r()}(),this.timer=setInterval(function(){for(var n=0;n<s;n++){var i=a[n];i.x+=i.moveX,i.y+=i.moveY,i.x>t?i.x=0:i.x<0&&(i.x=t),i.y>e?i.y=0:i.y<0&&(i.y=e)}r()},16)},userCheck:function(){return""==this.user_text?(this.user_err=this.$t("login.userErr1"),!1):/^[0-9a-zA-Z_]{6,20}$/.test(this.user_text)?(this.user_err="",!0):(this.user_err=this.$t("login.userErr2"),!1)},psdCheck:function(){return""==this.psd_text?(this.psd_err=this.$t("login.psdErr1"),!1):/^[0-9a-zA-Z_]{6,15}$/.test(this.psd_text)?(this.psd_err="",!0):(this.psd_err=this.$t("login.psdErr2"),!1)},captchaCheck:function(){return""==this.captcha_text?(this.captcha_err=this.$t("login.captchaErr"),!1):(this.captcha_err="",!0)},updateCaptcha:function(){var t=c()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a();case 2:200===(e=t.sent).code&&(this.captcha_key=e.data.key,this.captcha_img=e.data.img,this.autoFocus());case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),submit:function(t){if(this.userCheck(),this.psdCheck(),this.captcha_key){if(this.userCheck()&&this.psdCheck()&&this.captchaCheck()){this.loading=!0;var e={account:this.user_text,passwd:this.psd_text,captcha_key:this.captcha_key,captcha_value:this.captcha_text,force:t};this.loginSubmit(e)}}else this.updateCaptcha()},loginSubmit:function(){var t=c()(i.a.mark(function t(e){var s,n,a=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.c(e);case 2:s=t.sent,this.loading=!1,200===s.code&&("Success"===s.msg&&"admin1"===this.user_text&&"123456"===this.psd_text?(n=s.data||{},this.$message.success(this.$t("login.success")),n.token&&(localStorage.setItem("admin_token",n.token),localStorage.setItem("admin_token_time",(new Date).getTime())),this.$router.push({path:"./pages/index"})):"AlreadyOnline"===s.msg?this.$confirm(this.$t("login.alreadyOnline"),this.$t("login.tips"),{confirmButtonText:this.$t("login.continue"),cancelButtonText:this.$t("login.cancel"),type:"warning"}).then(function(){a.submit(1)}).catch(function(){a.$message.info(a.$t("login.cancelLogin"))}):this.$message.error(this.$t("login.fail")));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),autoFocus:function(){var t=this;this.$nextTick(function(){t.$refs.captchaInput.focus()})}},destroyed:function(){clearInterval(this.timer)}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[s("canvas",{attrs:{id:"bgCanvas"}}),t._v(" "),s("div",{staticClass:"login-container"},[s("switchLang",{staticClass:"switch-language"}),t._v(" "),s("p",{staticClass:"login-title-1"},[t._v(t._s(t.$t("login.title1")))]),t._v(" "),s("p",{staticClass:"login-title-2"},[t._v(t._s(t.$t("login.title2")))]),t._v(" "),s("form",{staticClass:"login-box"},[s("div",{staticClass:"user inp"},[s("i",{staticClass:"iconfont icon-user"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_text,expression:"user_text"}],class:""==t.user_err?"":"no",attrs:{type:"text",placeholder:t.$t("login.user")+"(admin1)"},domProps:{value:t.user_text},on:{blur:function(e){t.userCheck()},input:function(e){e.target.composing||(t.user_text=e.target.value)}}}),t._v(" "),s("p",{staticClass:"err-text"},[t._v(t._s(t.user_err))])]),t._v(" "),s("div",{staticClass:"password inp"},[s("i",{staticClass:"iconfont icon-password"}),t._v(" "),"checkbox"==(t.show_pwd?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.psd_text,expression:"psd_text"}],class:""==t.psd_err?"":"no",attrs:{placeholder:t.$t("login.psd")+"(123456)",type:"checkbox"},domProps:{checked:Array.isArray(t.psd_text)?t._i(t.psd_text,null)>-1:t.psd_text},on:{blur:function(e){t.psdCheck()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submit()},change:function(e){var s=t.psd_text,n=e.target,i=!!n.checked;if(Array.isArray(s)){var a=t._i(s,null);n.checked?a<0&&(t.psd_text=s.concat([null])):a>-1&&(t.psd_text=s.slice(0,a).concat(s.slice(a+1)))}else t.psd_text=i}}}):"radio"==(t.show_pwd?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.psd_text,expression:"psd_text"}],class:""==t.psd_err?"":"no",attrs:{placeholder:t.$t("login.psd")+"(123456)",type:"radio"},domProps:{checked:t._q(t.psd_text,null)},on:{blur:function(e){t.psdCheck()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submit()},change:function(e){t.psd_text=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.psd_text,expression:"psd_text"}],class:""==t.psd_err?"":"no",attrs:{placeholder:t.$t("login.psd")+"(123456)",type:t.show_pwd?"text":"password"},domProps:{value:t.psd_text},on:{blur:function(e){t.psdCheck()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submit()},input:function(e){e.target.composing||(t.psd_text=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-look",class:{"show-pwd":t.show_pwd},attrs:{title:t.show_pwd?t.$t("login.hiddenPsd"):t.$t("login.showPsd")},on:{click:function(e){t.show_pwd=!t.show_pwd}}}),t._v(" "),s("p",{staticClass:"err-text"},[t._v(t._s(t.psd_err))])]),t._v(" "),t.captcha_key?s("div",{staticClass:"captcha inp"},[s("i",{staticClass:"iconfont icon-captcha"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha_text,expression:"captcha_text"}],ref:"captchaInput",class:""==t.captcha_err?"":"no",attrs:{placeholder:t.$t("login.captcha")},domProps:{value:t.captcha_text},on:{blur:function(e){t.captchaCheck()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submit()},input:function(e){e.target.composing||(t.captcha_text=e.target.value)}}}),t._v(" "),s("p",{staticClass:"err-text"},[t._v(t._s(t.captcha_err))]),t._v(" "),s("img",{attrs:{src:t.captcha_img},on:{click:t.updateCaptcha}})]):t._e(),t._v(" "),s("span",{staticClass:"forget-psd",class:{"forget-psd-open":t.explain_switch},on:{click:function(e){t.explain_switch=!t.explain_switch}}},[t._v(t._s(t.$t("login.forgetPassword")))]),t._v(" "),s("el-button",{staticClass:"login-btn my-button",attrs:{type:"primary",loading:t.loading,size:"small"},on:{click:function(e){t.submit()}}},[t._v(t._s(t.$t("login.signIn")))]),t._v(" "),s("div",{staticClass:"login-explain",class:{"explain-open":t.explain_switch}},[s("ul",{staticClass:"explain-info float-left"},[s("li",{staticClass:"item"},[t._v("· "+t._s(t.$t("login.contact")))]),t._v(" "),s("li",{staticClass:"item"},[t._v("· "+t._s(t.$t("login.email"))+"：329255122@qq.com")])])])],1)],1)])},staticRenderFns:[]};var u=s("VU/8")(r,l,!1,function(t){s("x8Gz")},"data-v-54baecce",null);e.default=u.exports},djFx:function(t,e){},"l/oH":function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"switchLang"}},[s("el-dropdown",{staticClass:"international",attrs:{trigger:"click"},on:{command:t.checkLang}},[s("div",[s("i",{staticClass:"iconfont icon-yuyan",attrs:{"data-step":"1","data-intro":t.$t("introductorPage.step1")}})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{disabled:"zh"===t.language,command:"zh"}},[t._v("中文")]),t._v(" "),s("el-dropdown-item",{attrs:{disabled:"en"===t.language,command:"en"}},[t._v("English")])],1)],1)],1)},staticRenderFns:[]};var i=s("VU/8")({name:"switchLang",data:function(){return{}},computed:{language:function(){return this.$store.state.language}},methods:{checkLang:function(t){this.$i18n.locale=t,this.$store.commit("SET_LANGUAGE",t),this.$message({message:"zh"==t?"切换为中文":"Switch To English",type:"success"})}}},n,!1,function(t){s("djFx")},"data-v-7ebc848f",null);e.a=i.exports},x8Gz:function(t,e){}});
//# sourceMappingURL=7.6714fc358c659e044479.js.map