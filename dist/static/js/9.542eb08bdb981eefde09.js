webpackJsonp([9],{"17kH":function(a,t){},"9zJf":function(a,t){},I1sa:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("3kTw"),o={name:"photoUpload",data:function(){return{headers:{Authorization:"token "+localStorage.getItem("admin_token")},hasUpload:!1,progress:0,imageUrl:""}},props:{ajax_address:"",photo:""},created:function(){this.photo&&(this.imageUrl=this.photo,this.hasUpload=!0)},methods:{handleUpload:function(a){var t=this,e=new FormData;e.append("file",a.file),this.hasUpload=!0,this.$http({method:"post",url:this.ajax_address,data:e,headers:this.headers,onUploadProgress:function(a){var e=a.loaded/a.total*100|0;t.progress=e}}).then(function(e){var s=e.data||"";t.progress=0,200===s.code?(t.imageUrl=URL.createObjectURL(a.file),t.hasUpload=!0,t.$emit("upload_success",s.data.id)):422===s.code&&(t.hasUpload=!1,t.$message.error(s.code+":"+s.errors.file.map(function(a){return a})))}).catch(function(a){t.$message.error(a.response.status+" : 服务器错误!"),t.progress=0,t.hasUpload=!1})}}},r={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"public-pages",attrs:{id:"photoUpload"}},[e("el-upload",{staticClass:"avatar-uploader",class:{allready_upload:a.hasUpload},attrs:{"http-request":a.handleUpload,accept:"image/jpeg,image/png,image/jpg,image/bmp",action:a.ajax_address,"list-type":"picture-card"}},[a.imageUrl?e("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):a._e()]),a._v(" "),a.progress?e("el-progress",{staticClass:"upload-progress",attrs:{type:"circle",percentage:a.progress,status:100==a.progress?"success":""}}):a._e()],1)},staticRenderFns:[]};var i={name:"imgUpload",data:function(){return{uploadUrl:"/"}},components:{photoUpload:e("VU/8")(o,r,!1,function(a){e("17kH")},null,null).exports,topTooltip:s.a},created:function(){this.layeyi()},methods:{uploadSuccess:function(a){this.form.photo=a},layeyi:function(){}}},l={render:function(){var a=this.$createElement,t=this._self._c||a;return t("div",{attrs:{id:"imgUpload"}},[t("topTooltip",[this._v(this._s(this.$t("imgUpload")))]),this._v(" "),t("photoUpload",this._g({attrs:{ajax_address:this.uploadUrl}},{upload_success:this.uploadSuccess}))],1)},staticRenderFns:[]};var p=e("VU/8")(i,l,!1,function(a){e("9zJf")},"data-v-43a9b2ec",null);t.default=p.exports}});
//# sourceMappingURL=9.542eb08bdb981eefde09.js.map